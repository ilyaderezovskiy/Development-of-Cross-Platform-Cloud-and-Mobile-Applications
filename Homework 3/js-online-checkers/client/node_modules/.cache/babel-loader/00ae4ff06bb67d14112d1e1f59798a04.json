{"ast":null,"code":"var _jsxFileName = \"/Users/ilyaderezovskiy/Desktop/Homework 3/js-online-checkers/client/src/App.js\";\nimport React, { useEffect, useState } from 'react';\nimport './App.css';\nimport io from 'socket.io-client';\nimport CreateNewGame from './CreateNewGame';\nimport Lobby from './Lobby';\nimport Game from './Game';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Navbar from 'react-bootstrap/Navbar';\nimport Modal from 'react-bootstrap/Modal';\nimport Nav from 'react-bootstrap/Nav';\nimport Button from 'react-bootstrap/Button';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nconst PAGE_GAME = 'Game';\nconst PAGE_LOBBY = 'Lobby';\nconst PAGE_CREATE_NEW_GAME = 'CreateNewGame';\n\nfunction App() {\n  const [page, setPage] = useState('Lobby');\n  const [games, setGames] = useState([]);\n  const [color, setColor] = useState('');\n  const [game, setGame] = useState({\n    board: [],\n    chat: []\n  });\n  const [gameId, setGameId] = useState(null);\n  const [socket, setSocket] = useState(null);\n  const [showModal, setShowModal] = useState(false);\n  const [modalTitle, setModalTitle] = useState('');\n  const [modalText, setModalText] = useState('');\n\n  const joinGame = gameId => {\n    socket.emit('join-game', gameId);\n    setPage(PAGE_GAME);\n    setGameId(gameId);\n  };\n\n  const movePiece = ({\n    selectedPiece,\n    destination\n  }) => {\n    socket.emit('move-piece', {\n      selectedPiece,\n      destination\n    });\n  };\n\n  useEffect(() => {\n    const game = games.find(g => g.id === gameId);\n\n    if (!game) {\n      setGame({\n        board: []\n      });\n    } else {\n      setGame(game);\n    }\n  }, [games, gameId]);\n\n  const leaveGame = () => {\n    setGame(PAGE_LOBBY);\n    socket.emit('leave-game');\n  };\n\n  const createGame = name => {\n    socket.emit('create-game', name);\n    setPage(PAGE_GAME);\n  };\n\n  const sendChat = message => {\n    socket.emit('chat-message', message);\n  };\n\n  useEffect(() => {\n    const newSocket = io('http://localhost:4000', {\n      transports: ['websocket']\n    });\n    newSocket.on('disconnect', () => {\n      setGameId(null);\n      setColor('');\n      setPage(PAGE_LOBBY);\n      alert('The server crashed or restarted');\n    });\n    newSocket.on('games', games => {\n      setGames(games);\n    });\n    newSocket.on('your-game-created', gameId => {\n      setGameId(gameId);\n    });\n    newSocket.on('color', color => setColor(color));\n    newSocket.on('end-game', () => {\n      setGameId(null);\n      setColor('');\n      setPage(PAGE_LOBBY);\n      setShowModal(true);\n      setModalText('Your opponent has left the game');\n      setModalTitle('Game Over');\n    });\n    newSocket.on('winner', winner => {\n      alert(`${winner} has won the game!`);\n    });\n    setSocket(newSocket);\n  }, []);\n\n  const handleCloseModal = () => setShowModal(false);\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Navbar, {\n    className: \"mb-4\",\n    bg: \"dark\",\n    variant: \"dark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Navbar.Brand, {\n    href: \"#home\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }, \"React Online Checkers\"), /*#__PURE__*/React.createElement(Nav, {\n    className: \"mr-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Nav.Link, {\n    onClick: () => setPage(PAGE_LOBBY),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 11\n    }\n  }, \"Lobby\"))), /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 11\n    }\n  }, page === PAGE_LOBBY && /*#__PURE__*/React.createElement(Lobby, {\n    games: games,\n    setPage: setPage,\n    joinGame: joinGame,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 15\n    }\n  }), page === PAGE_CREATE_NEW_GAME && /*#__PURE__*/React.createElement(CreateNewGame, {\n    createGame: createGame,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  }), page === PAGE_GAME && game && /*#__PURE__*/React.createElement(Game, {\n    color: color,\n    game: game,\n    leaveGame: leaveGame,\n    movePiece: movePiece,\n    sendChat: sendChat,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(Modal, {\n    show: showModal,\n    onHide: handleCloseModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 11\n    }\n  }, modalTitle)), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }\n  }, modalText), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    onClick: handleCloseModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 11\n    }\n  }, \"OK\"))));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/ilyaderezovskiy/Desktop/Homework 3/js-online-checkers/client/src/App.js"],"names":["React","useEffect","useState","io","CreateNewGame","Lobby","Game","Container","Row","Col","Navbar","Modal","Nav","Button","PAGE_GAME","PAGE_LOBBY","PAGE_CREATE_NEW_GAME","App","page","setPage","games","setGames","color","setColor","game","setGame","board","chat","gameId","setGameId","socket","setSocket","showModal","setShowModal","modalTitle","setModalTitle","modalText","setModalText","joinGame","emit","movePiece","selectedPiece","destination","find","g","id","leaveGame","createGame","name","sendChat","message","newSocket","transports","on","alert","winner","handleCloseModal"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './App.css';\nimport io from 'socket.io-client';\nimport CreateNewGame from './CreateNewGame';\nimport Lobby from './Lobby';\nimport Game from './Game';\n\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Navbar from 'react-bootstrap/Navbar';\nimport Modal from 'react-bootstrap/Modal';\nimport Nav from 'react-bootstrap/Nav';\nimport Button from 'react-bootstrap/Button';\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nconst PAGE_GAME = 'Game';\nconst PAGE_LOBBY = 'Lobby';\nconst PAGE_CREATE_NEW_GAME = 'CreateNewGame';\n\nfunction App() {\n  const [page, setPage] = useState('Lobby');\n  const [games, setGames] = useState([]);\n  const [color, setColor] = useState('');\n  const [game, setGame] = useState({ board: [], chat: [] });\n  const [gameId, setGameId] = useState(null);\n  const [socket, setSocket] = useState(null);\n  const [showModal, setShowModal] = useState(false);\n  const [modalTitle, setModalTitle] = useState('');\n  const [modalText, setModalText] = useState('');\n\n  const joinGame = (gameId) => {\n    socket.emit('join-game', gameId);\n    setPage(PAGE_GAME);\n    setGameId(gameId);\n  };\n\n  const movePiece = ({ selectedPiece, destination }) => {\n    socket.emit('move-piece', {\n      selectedPiece,\n      destination,\n    });\n  };\n\n  useEffect(() => {\n    const game = games.find((g) => g.id === gameId);\n    if (!game) {\n      setGame({\n        board: [],\n      });\n    } else {\n      setGame(game);\n    }\n  }, [games, gameId]);\n\n  const leaveGame = () => {\n    setGame(PAGE_LOBBY);\n    socket.emit('leave-game');\n  };\n\n  const createGame = (name) => {\n    socket.emit('create-game', name);\n    setPage(PAGE_GAME);\n  };\n\n  const sendChat = (message) => {\n    socket.emit('chat-message', message);\n  };\n\n  useEffect(() => {\n    const newSocket = io('http://localhost:4000', {\n      transports: ['websocket'],\n    });\n    newSocket.on('disconnect', () => {\n      setGameId(null);\n      setColor('');\n      setPage(PAGE_LOBBY);\n\n      alert('The server crashed or restarted');\n    });\n    newSocket.on('games', (games) => {\n      setGames(games);\n    });\n    newSocket.on('your-game-created', (gameId) => {\n      setGameId(gameId);\n    });\n    newSocket.on('color', (color) => setColor(color));\n    newSocket.on('end-game', () => {\n      setGameId(null);\n      setColor('');\n      setPage(PAGE_LOBBY);\n      setShowModal(true);\n      setModalText('Your opponent has left the game');\n      setModalTitle('Game Over');\n    });\n    newSocket.on('winner', (winner) => {\n      alert(`${winner} has won the game!`);\n    });\n    setSocket(newSocket);\n  }, []);\n\n  const handleCloseModal = () => setShowModal(false);\n\n  return (\n    <>\n      <Navbar className=\"mb-4\" bg=\"dark\" variant=\"dark\">\n        <Navbar.Brand href=\"#home\">\n          React Online Checkers\n        </Navbar.Brand>\n        <Nav className=\"mr-auto\">\n          <Nav.Link onClick={() => setPage(PAGE_LOBBY)}>\n            Lobby\n          </Nav.Link>\n        </Nav>\n      </Navbar>\n      <Container>\n        <Row>\n          <Col>\n            {page === PAGE_LOBBY && (\n              <Lobby\n                games={games}\n                setPage={setPage}\n                joinGame={joinGame}\n              />\n            )}\n            {page === PAGE_CREATE_NEW_GAME && (\n              <CreateNewGame createGame={createGame} />\n            )}\n            {page === PAGE_GAME && game && (\n              <Game\n                color={color}\n                game={game}\n                leaveGame={leaveGame}\n                movePiece={movePiece}\n                sendChat={sendChat}\n              />\n            )}\n          </Col>\n        </Row>\n      </Container>\n      <Modal show={showModal} onHide={handleCloseModal}>\n        <Modal.Header closeButton>\n          <Modal.Title>{modalTitle}</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>{modalText}</Modal.Body>\n        <Modal.Footer>\n          <Button\n            variant=\"primary\"\n            onClick={handleCloseModal}\n          >\n            OK\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    </>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}